<!-- STYLE !-->
<head>
	<style>
		table{
			border:1px;
		}
		td{
			height: 50px;
			width: 50px;
		}
		</style>

</head>

<!-- HTML !-->
<body>
<div id="chat-text" style="width:500px; height:100px;overflow-y:scroll"></div>
<form id="chat-form">  <input id="chat-input" type="text" style="width:500px"></input> </form>

<div id="spiel-feld" style="width:500px; height:auto;overflow-y:scroll"> </div>


</body>

<!-- SKRIPT !-->
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"> </script>
<script>
	var socket = io();

	var chatText = document.getElementById('chat-text');
	var chatInput = document.getElementById('chat-input');
	var chatForm = document.getElementById('chat-form');
	var spielFeld = document.getElementById('spiel-feld');
	
	//Gib Wert jeder Zelle aus bei KLICK
	var table = document.getElementsByTagName("table")[0];
	/*var cells = table.getElementsByTagName("td");  

	for(var i = 0; i < cells.length; i++){
	    // Cell Object
	    var cell = cells[i];
	    // Track with onclick
	    cell.onclick = function(){
	        var cellIndex  = this.cellIndex;  
	        var rowIndex = this.parentNode.rowIndex;
	        socket.emit('cellClicked',table.rows[rowIndex].cells[cellIndex].innerText);
	      //  alert(table.rows[rowIndex].cells[cellIndex].innerText);
	    }
	} */

	//KOMMUNIKATION MIT SERVER
	socket.on('init',function(data){
		spielFeld.innerHTML = data;
	}); 
	socket.on('addToChat',function(data){
		chatText.innerHTML += '<div>' + data + '<div>';
	});

	socket.on('refreshTable',function(data){
			for(var i = 0; i < cells.length; i++){
			    var cell = cells[i];
			    cell.onclick = function(){
			        var cellIndex  = this.cellIndex;  
			        var rowIndex = this.parentNode.rowIndex;
			        table.rows[rowIndex].cells[cellIndex].innerHTML = "<span style='font-size:50px'>"+'X'+"</span>";
			    }
			}
	});

	chatForm.onsubmit = function(e){
		e.preventDefault();
		socket.emit('sendMsgToServer',chatInput.value);
		chatInput.value = '';
	}

</script>

